<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="ko"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Feature.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">lai-common-lib</a> &gt; <a href="index.source.html" class="el_package">com.lge.common.data</a> &gt; <span class="el_source">Feature.java</span></div><h1>Feature.java</h1><pre class="source lang-java linenums">package com.lge.common.data;

import java.util.Comparator;
import java.util.List;

import com.google.common.base.Joiner;
import com.google.common.collect.ComparisonChain;
import com.google.common.collect.Lists;

<span class="fc" id="L10">public class Feature {</span>
    public String type;
    public String className;
    public String actionName;
<span class="fc" id="L14">    public List&lt;String&gt; categoryList = Lists.newArrayList();</span>

    // URI sample: &lt;scheme&gt;://&lt;host&gt;:&lt;port&gt;[&lt;path&gt;|&lt;pathPrefix&gt;|&lt;pathPattern&gt;]
    // scheme: if not specified for intent-filter, all the other URI attributes
    // are ignored
    // host: if not specified for intent-filter, the port attribute and all the
    // path attributes are ignored
    // path: specifies a complete path that is matched against the complete path
    // in an intent object
    // pathPrefix: specifies a partial path that is matched against only the
    // initial part of the path in the intent object
    // pathPattern: almost same with 'path', but it can contain the wild cards (*)
<span class="fc" id="L26">    public List&lt;String&gt; schemeList = Lists.newArrayList();</span>
<span class="fc" id="L27">    public List&lt;String&gt; hostList = Lists.newArrayList();</span>
<span class="fc" id="L28">    public List&lt;String&gt; portList = Lists.newArrayList();</span>
<span class="fc" id="L29">    public List&lt;String&gt; pathList = Lists.newArrayList();</span>
<span class="fc" id="L30">    public List&lt;String&gt; pathPatternList = Lists.newArrayList();</span>
<span class="fc" id="L31">    public List&lt;String&gt; pathPrefixList = Lists.newArrayList();</span>
<span class="fc" id="L32">    public List&lt;String&gt; mimeTypeList = Lists.newArrayList();</span>

    // For content provider only
    public String authorities;
    public String readPermission;
    public String writePermission;

    public void addCategory(String category) {
<span class="fc" id="L40">        categoryList.add(category);</span>
<span class="fc" id="L41">    }</span>

    public String getCategories() {
<span class="fc" id="L44">        return getDataValues(&quot;category&quot;);</span>
    }

    public void addScheme(String scheme) {
<span class="fc" id="L48">        schemeList.add(scheme);</span>
<span class="fc" id="L49">    }</span>

    public String getSchemes() {
<span class="fc" id="L52">        return getDataValues(&quot;scheme&quot;);</span>
    }

    public void addHost(String host) {
<span class="fc" id="L56">        hostList.add(host);</span>
<span class="fc" id="L57">    }</span>

    public String getHosts() {
<span class="fc" id="L60">        return getDataValues(&quot;host&quot;);</span>
    }

    public void addPort(String port) {
<span class="fc" id="L64">        portList.add(port);</span>
<span class="fc" id="L65">    }</span>

    public String getPorts() {
<span class="fc" id="L68">        return getDataValues(&quot;port&quot;);</span>
    }

    public void addPath(String path) {
<span class="fc" id="L72">        pathList.add(path);</span>
<span class="fc" id="L73">    }</span>

    public String getPaths() {
<span class="fc" id="L76">        return getDataValues(&quot;path&quot;);</span>
    }

    public void addPathPattern(String pathPattern) {
<span class="fc" id="L80">        pathPatternList.add(pathPattern);</span>
<span class="fc" id="L81">    }</span>

    public String getPathPatterns() {
<span class="fc" id="L84">        return getDataValues(&quot;pathPattern&quot;);</span>
    }

    public void addPathPrefix(String pathPrefix) {
<span class="fc" id="L88">        pathPrefixList.add(pathPrefix);</span>
<span class="fc" id="L89">    }</span>

    public String getPathPrefixes() {
<span class="fc" id="L92">        return getDataValues(&quot;pathPrefix&quot;);</span>
    }

    public void addMimeType(String mimeType) {
<span class="fc" id="L96">        mimeTypeList.add(mimeType);</span>
<span class="fc" id="L97">    }</span>

    public String getMimeTypes() {
<span class="fc" id="L100">        return getDataValues(&quot;mimeType&quot;);</span>
    }

    private String getDataValues(String type) {
<span class="fc" id="L104">        List&lt;String&gt; datas = null;</span>
<span class="fc bfc" id="L105" title="All 2 branches covered.">        if (type.equalsIgnoreCase(&quot;category&quot;)) {</span>
<span class="fc" id="L106">            datas = categoryList;</span>
<span class="fc bfc" id="L107" title="All 2 branches covered.">        } else if (type.equalsIgnoreCase(&quot;scheme&quot;)) {</span>
<span class="fc" id="L108">            datas = schemeList;</span>
<span class="fc bfc" id="L109" title="All 2 branches covered.">        } else if (type.equalsIgnoreCase(&quot;host&quot;)) {</span>
<span class="fc" id="L110">            datas = hostList;</span>
<span class="fc bfc" id="L111" title="All 2 branches covered.">        } else if (type.equalsIgnoreCase(&quot;port&quot;)) {</span>
<span class="fc" id="L112">            datas = portList;</span>
<span class="fc bfc" id="L113" title="All 2 branches covered.">        } else if (type.equalsIgnoreCase(&quot;path&quot;)) {</span>
<span class="fc" id="L114">            datas = pathList;</span>
<span class="fc bfc" id="L115" title="All 2 branches covered.">        } else if (type.equalsIgnoreCase(&quot;pathPattern&quot;)) {</span>
<span class="fc" id="L116">            datas = pathPatternList;</span>
<span class="fc bfc" id="L117" title="All 2 branches covered.">        } else if (type.equalsIgnoreCase(&quot;pathPrefix&quot;)) {</span>
<span class="fc" id="L118">            datas = pathPrefixList;</span>
<span class="pc bpc" id="L119" title="1 of 2 branches missed.">        } else if (type.equalsIgnoreCase(&quot;mimeType&quot;)) {</span>
<span class="fc" id="L120">            datas = mimeTypeList;</span>
        } else {
<span class="nc" id="L122">            return &quot;&quot;;</span>
        }

<span class="fc" id="L125">        return Joiner.on('\n').skipNulls().join(datas);</span>
    }

    @Override
    public boolean equals(Object obj) {
<span class="fc bfc" id="L130" title="All 2 branches covered.">        if (obj instanceof Feature) {</span>
<span class="fc" id="L131">            Feature other = (Feature) obj;</span>

<span class="fc bfc" id="L133" title="All 2 branches covered.">            return ComparisonChain.start()</span>
                    .compare(type, other.type, STRING_COMPARATOR)
                    .compare(className, other.className, STRING_COMPARATOR)
                    .compare(actionName, other.actionName, STRING_COMPARATOR)
                    .compare(categoryList, other.categoryList, STRING_LIST_COMPARATOR)
                    .compare(schemeList, other.schemeList, STRING_LIST_COMPARATOR)
                    .compare(hostList, other.hostList, STRING_LIST_COMPARATOR)
                    .compare(portList, other.portList, STRING_LIST_COMPARATOR)
                    .compare(pathList, other.pathList, STRING_LIST_COMPARATOR)
                    .compare(pathPatternList, other.pathPatternList, STRING_LIST_COMPARATOR)
                    .compare(pathPrefixList, other.pathPrefixList, STRING_LIST_COMPARATOR)
                    .compare(mimeTypeList, other.mimeTypeList, STRING_LIST_COMPARATOR)
                    .result() == 0;
        } else {
<span class="fc" id="L147">            return false;</span>
        }
    }

<span class="fc" id="L151">    private Comparator&lt;List&lt;String&gt;&gt; STRING_LIST_COMPARATOR = new Comparator&lt;List&lt;String&gt;&gt;() {</span>
        @Override
        public int compare(List&lt;String&gt; myList, List&lt;String&gt; yourList) {
<span class="pc bpc" id="L154" title="1 of 2 branches missed.">            if (myList.size() != yourList.size()) {</span>
<span class="nc" id="L155">                return -1;</span>
            }
<span class="fc bfc" id="L157" title="All 2 branches covered.">            for (String yourString : yourList) {</span>
<span class="fc bfc" id="L158" title="All 2 branches covered.">                if (!myList.contains(yourString.trim())) {</span>
<span class="fc" id="L159">                    return -1;</span>
                }
<span class="fc" id="L161">            }</span>
<span class="fc" id="L162">            return 0;</span>
        }
    };

<span class="fc" id="L166">    private Comparator&lt;String&gt; STRING_COMPARATOR = new Comparator&lt;String&gt;() {</span>
        @Override
        public int compare(String myString, String yourString) {
<span class="fc bfc" id="L169" title="All 4 branches covered.">            if (myString != null &amp;&amp; yourString == null) {</span>
<span class="fc" id="L170">                return -1;</span>
            }
<span class="pc bpc" id="L172" title="1 of 4 branches missed.">            if (myString == null &amp;&amp; yourString != null) {</span>
<span class="nc" id="L173">                return -1;</span>
            }
<span class="pc bpc" id="L175" title="1 of 4 branches missed.">            if (myString == null &amp;&amp; yourString == null) {</span>
<span class="fc" id="L176">                return 0;</span>
            }
<span class="pc bpc" id="L178" title="1 of 2 branches missed.">            if (myString.trim().equals(yourString.trim())) {</span>
<span class="fc" id="L179">                return 0;</span>
            }
<span class="nc" id="L181">            return -1;</span>
        }
    };
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.1.201405082137</span></div></body></html>